{% extends 'base.html' %}
{% block content %}

	<div class="container"> 
	   <div class="row">
	   	<div class="col-sm-6">
		   <div class="details__host">
				<div>
					<img src="/images/server.png" width="250" height="250"  />
				</div>
				<div class="infos">
					<h3>Hostname: <span>{{hostname}}</span></h3>
					<p>Connection: <span>{{uri_conn}}</span></p>
					<p>Hypervisor: <span>{{hypervisor}}</span></p>
					<p>Memory: <span>{{host_memory}}</span></p>
					<p>Logical CPUs: <span>{{logical_cpu}}</span></p>
					<p> Processor:<span>{{model_cpu}}</span></p>
					<p>Architecture: <span>{{host_arch}}</span></p>
					
						
					
					
					
					
				</div>
			</div>
		</div>
		<div class="col-sm-6">
			<h4>Performance</h4>
			<p>cpu usage</p>
			<canvas id="cpu-chart" width="800" height="450"></canvas>
			<p>memory usage</p>
			<canvas id="mem-chart" width="800" height="450"></canvas>
			
		</div>
	   	</div>
	</div>
{% endblock %}
{% block extra_scripts %}				
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>			
<script>
//////////////////////

function hostusage() {
	$.getJSON('http://localhost:8000/hostusage', function (data) {
		new Chart(document.getElementById("mem-chart"), {
					type: 'line',
					data: {
						labels: data["timer"],
						datasets: [{ 
							data: data["mem"],
							label: "memory",
							borderColor: "#3e95cd",
							fill: false
						}
						]
					},
					options: {
						title: {
						display: true
						
						}
					}
					});
		//////////////////
		new Chart(document.getElementById("cpu-chart"), {
					type: 'line',
					data: {
						labels: data["timer"],
						datasets: [{ 
							data: data["cpu"],
							label: "cpu",
							borderColor: "#3e95cd",
							fill: false
						}
						]
					},
					options: {
						title: {
						display: true
					
						}
					}
					});
	});
}
hostusage()

$(function () {
	window.setInterval('hostusage()', 30000);
});
        
</script>
{% endblock extra_scripts %}